<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<link rel="stylesheet" href="../../dijit/themes/claro/claro.css"/>

<script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script>
    djConfig = {
        isDebug: true,
		parseOnLoad: false,
        modulePaths: {djeo: "../djeo"},
		mapEngine: "gmaps"
    };
</script>
<script src="util.js"></script>

<script src="../../dojo/dojo.js"></script>

<script>
if (djConfig.mapEngine=="ge") dojo.require("djeo.ge.Engine");

dojo.require("dijit.form.Button");
dojo.require("djeo.Map");
dojo.require("djeo.control.Navigation");

var style = [
	{
		stroke: "black",
		strokeWidth: 1,
		fill: "lightgrey",
		size: 20
	},
	{
		styleClass: "styleForAreas",
		filter: "this.pd<=52.38",
		fill: "orange"
	},
	{
		styleClass: "styleForAreas",
		filter: "this.pd>52.38 && this.pd<=188.64",
		fill: "lime",
		stroke: "blue",
		strokeWidth: 2
	},
	{
		fid: "US-CA",
		polygon: {
			fill: "blue",
			stroke: "brown"
		}
	},
	{
		fid: ["US-IL","US-OH"],
		polygon: {
			fill: "green",
			stroke: "cyan"
		}
	},
	{
		styleClass: "lineString",
		stroke: "orange",
		strokeWidth: 5
	}
]

var features = [
	{
		features: [
			{
				type: "Point",
				coords: [-87.65, 41.85],
				style: {
					//shape: "star",
					size: [28, 22],
					src: "resources/icons/load.png",
					scale: 3
				},
				name: "Chicago"
			},
			{
				type: "Point",
				coords: [-90.05, 35.15],
				style: {
					size: [28, 22],
					src: "resources/icons/load.png",
					scale: 2
				},
				name: "Memphis"
			},
			{
				styleClass: "lineString",
				type: "LineString",
				coords: [[-87.65, 41.85],[-90.05, 35.15]]
			},/*
			{
				styleClass: "lineString",
				style: {fill: "lime"},
				type: "Polygon",
				coords: [[[-86.65, 41.85],[-89.05, 35.15],[-80, 37.15],[-86.65, 41.85]]]
			},
			{
				style: {fill: "pink", stroke:"red"},
				type: "Polygon",
				coords: [
					[[-80, 41.85],[-77, 41.85],[-77, 35.15],[-80,35.15],[-80, 41.85]],
					[[-79, 40],[-79, 37],[-78, 37],[-78, 40],[-79, 40]]
				]
			}
			{
				type: "MultiPolygon",
				styleClass: "lineString",
				style: {fill: "pink", stroke:"red"},
				coords: [
					[[[-86.65, 41.85],[-89.05, 35.15],[-80, 37.15],[-86.65, 41.85]]],
					[
						[[-80, 41.85],[-77, 41.85],[-77, 35.15],[-80,35.15],[-80, 41.85]],
						[[-79, 40],[-79, 37],[-78, 37],[-78, 40],[-79, 40]]
					]
				]
			}*/
			{
				type: "MultiLineString",
				styleClass: "lineString",
				style: {fill: "pink", stroke:"red"},
				coords: [
					[[-86.65, 41.85],[-89.05, 35.15],[-80, 37.15],[-86.65, 41.85]],
					[[-80, 41.85],[-77, 41.85],[-77, 35.15],[-80,35.15],[-80, 41.85]],
					[[-79, 40],[-79, 37],[-78, 37],[-78, 40],[-79, 40]]
				]
			}
		]
	}
];

var navigation;
var addOnLoad = function() {
	
    new dijit.form.ToggleButton({
		checked: true,
		onChange: function(value){
			navigation.enable(value);
		},
		iconClass: "dijitRadioIcon"
	}, "navigation");
	
    var map = new djeo.Map("map", {
		style: style,
		engine: {type: djConfig.mapEngine},
		layers: "TERRAIN",
		features: features/*{
			type: "Point",
			coords: [-90.05, 35.15],
			style: {
				type: "image",
				width: 28,
				height: 22,
				src: "resources/icons/load.png",
				scale: 2
			},
			name: "Memphis"
		}*/
	});
	map.ready(function() {
		var marker = new google.maps.Marker({
			position: new google.maps.LatLng(35.15, -90.05),
			map: map.engine.gmap
		});
		navigation = new djeo.control.Navigation(map);
	});
}

dojo.addOnLoad(addOnLoad);

</script>

</head>

<body class="claro">

<div id="navigation">Navigation control</div>
<div id="map" style="width:800px;height:400px;"></div>

</body>
</html>